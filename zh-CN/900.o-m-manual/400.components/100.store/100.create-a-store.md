# 新增 Store

OceanBase 迁移服务（Oceane Migration Service，OMS）社区版支持在运维监控模块的 Store 页面新增 Store。

## 背景信息

增量拉取组件（Store）从源实例读取原始数据，经过解析、过滤，以及对数据进行格式化，最终将数据在本地持久化存储。在负载均衡或其它需要 Store 回拉的场景中，建议您新增 Store。在负载均衡或其它需要 Store 回拉的场景中，建议您新增 Store。

* 数据库日志还存在的情况下，需要回拉几天前的数据。

  此时该数据位点当前 Store 均已过期，如果重启当前 Store 会导致所有下游全部延时，需要创建一个回拉位点（Timestamp）启动的 Store。
  
* 对某个 Subtopic 进行负载均衡，Subtopic 可以是集群、租户或库粒度的数据源。

  目的是防止太多下游消耗 Store 资源，影响稳定性，从而导致大规模延时。

## 操作步骤

1. 登录 OMS 社区版控制台。

2. 在左侧导航栏，单击 **运维监控** **\>** **组件**，默认进入 **Store** 页面。

3. 在 **Store** 页面，单击右上角的 **新增**。

4. 在 **新增** 对话框中，配置各项参数。

   |    参数     | 是否必选 |                                               描述                                               |
   |-----------|------|------------------------------------------------------------------------------------------------|
   | Subtopic  | 必选   | 集群或租户维度的数据源，请根据具体任务选择对应 Subtopic。                                                              |
   | Node      | 可选   | 指定启动到哪台机器上。单节点部署时只有一台机器，默认在该机器上创建 Store。在高可用场景，不指定 Node 时，后台将自动调度到未达性能瓶颈的机器上。 |
   | Timestamp | 必选   | 时间戳，启动 Store 后指定从哪个时间点开始拉取数据库日志。请确保数据库日志存在，否则会造成 Store 启动失败。                        |

   确认数据库日志是否存在的方式示例如下：

   * 对于 MySQL 数据库，您可以通过 `mysqlbinlog` 工具查看源端的 `binlog` 文件。

   * 对于 PostgreSQL 数据库，首次启动 Store 成功后 OMS 社区版默认保存当前时间 48 小时内的日志。如果首次启动 Store 未成功，则无法指定早于当前时间的时间点进行日志拉取。

      <main id="notice" type='explain'>
      <h4>说明</h4>
      <ul>
      <li>
      <p>如果首次启动时间未超过 48 小时，则支持指定首次启动时间后的任意时间拉取日志。</p>
      </li>
      <li>
      <p>如果首次启动时间超过 48 小时，则支持指定当前时间 48 小时内的任意时间拉取日志。</p>
      </li>
      </main>

5. 单击 **新增**。
