# 查看数据迁移项目的详情

启动数据迁移项目后，您可以在数据迁移项目的详情页面查看相应项目的基本信息、项目执行的进度和状态等信息。

## 进入详情页面

1. 登录 OMS 社区版控制台。

2. 在左侧导航栏，单击 **数据迁移**。

3. 在 **迁移项目** 页面，单击目标项目的名称，进入详情页面查看其 **基本信息** 和 **迁移详情**。

   您可以在 **数据迁移** 页面，根据 **状态**、**类型** 和 **关键字** 搜索目标数据迁移项目。数据迁移项目的状态包括：

   * **未启动**：表示数据迁移项目尚未启动，您可以在对应的操作列中单击 **启动**。

   * **运行中**：数据迁移项目运行中，状态右侧展示了数据迁移的计划和当前进度。

   * **已暂停**：数据迁移项目已被手动中止，您可以在对应的操作列中单击 **恢复**，从中止的子任务开始继续执行迁移。

   * **失败**：数据迁移项目执行失败，状态右侧展示该项目失败的具体环节。单击数据迁移项目的名称，您可以在详情页面查看具体的报错信息。

   * **已完成**：数据迁移项目已成功执行完毕，OMS 社区版已按照您预设的迁移模式将指定的数据内容迁移至目标库中。

   * **释放中**：数据迁移项目正在被释放。释放中的数据迁移项目不能进行任何操作。

   * **已释放**：数据迁移项目已经成功释放。释放后，OMS 社区版会终止当前的迁移和增量同步项目。

## 查看基本信息

**基本信息** 区域为您展示数据迁移项目的配置信息，包括 **ID**、**迁移类型**、**告警等级**、**创建人**、**创建时间**、**全量迁移并发速度**、**全量校验并发速度** 和 **连接详情**。

您可以进行以下操作：

* 查看连接详情

  单击 **连接详情** 后的 **连接详情**，查看数据迁移项目源端和目标端的连接信息。

* 查看迁移对象

  单击页面右上角的 **查看迁移对象**，查看当前数据迁移项目的迁移对象列表。创建数据迁移项目后不支持修改迁移对象。

* 查看组件监控

  单击页面右上角的 **查看组件监控**，查看 Store、JDBCWriter、Checker-Ful 和 Checker-Verify 组件的信息。

* 查看或修改参数配置

  * 如果是处于 **运行中** 状态的数据迁移项目，请单击页面右上角的 **...** \> **查看参数配置**，查看创建数据迁移项目时的配置参数。
  
  * 如果是处于 **未启动**、**已暂停** 和 **失败** 状态的数据迁移项目，请单击页面右上角的 **...** \> **修改参数配置**。在 **修改参数配置** 对话框，重新配置目标参数，单击 **确定**。

    此处支持修改的具体参数和数据迁移项目的类型，以及任务运行的阶段有关，不同的运行阶段支持修改的参数不同。

* 下载对象设置信息

  OMS 支持下载数据迁移项目的配置信息，以批量导入的格式输出。详情请参见 [设置和下载迁移配置信息](../4.manage-data-migration-projects/6.download-and-import-the-settings-of-migration-objects.md)。
  
## 查看迁移详情

**迁移详情** 区域为您展示当前项目中，所有环节子任务的执行状态、进度、启动时间、完成时间和总计耗时等信息。

* **结构迁移**

  展示结构迁移的整体状态、启动时间、结束时间、总计耗时、表和视图的迁移进度。

  * 支持查看所有对象的名称、对应源库和目标库、迁移耗时和状态。
  
  * 在指定迁移对象对应的操作列单击 **查看创建语法**，可以查看表的创建语法，以及修改索引的创建语法。

  * 支持根据表或视图的迁移状态，筛选阻碍整体迁移进度的对象。例如，创建失败的表或视图。

* **全量迁移**

  展示全量迁移的整体状态、启动时间、结束时间、总计耗时、表对象和表索引的迁移详情。

  >**注意：**
  >
  >* 如果您在选择 **迁移类型** 时未配置 **结构迁移** ，则全量迁移时，OMS 会以源端和目标端匹配的字段进行迁移，不会检查表结构是否一致。
  >
  >在全量迁移完成之后，且后续步骤已启动的情况下，不允许在 **运维监控** \> **组件** \> **Checker** 页面，单击目标 Checker 组件后的 **重跑**。
  
  * 支持根据源库和目标库进行筛选。

  * 支持勾选 **查看有问题的对象**，筛选阻碍整体迁移进度的对象。

  * 在 **表对象** 页签，您可以查看对象名称、源库、目标库、预估数据量、已完成数据量和对应的状态。
  
  * 在 **表索引** 页签，您可以查看表对象、源库、目标库、创建时间、结束时间、耗时及其对应的状态。同时，您可以单击目标对象后的 **查看创建语法**，查看索引的创建语法。
  
  * 在 **全量迁移性能** 页签，您可以图形化查看 **源端 RPS**、**目标端 RPS**、**源端迁移流量** 和 **目标端迁移流量**，及时了解数据迁移的情况。

* 增量同步

  您可以在增量迁移区域查看延迟时间、当前位点时间，以及迁移流量等增量迁移性能信息。延迟时间的显示逻辑为：X 秒（Y 秒前更新），Y 小于 20 秒属于正常情况。

  数据迁移项目处于 **已暂停** 和 **失败** 状态时，您可以修改 **当前位点时间**。请注意修改增量迁移位点时，您无法选择当前时间之后的时间戳，且修改增量迁移位点后可能会导致数据重复或数据丢失，请谨慎操作。
  
* **全量校验**

  全量校验的整体状态、启动时间、结束时间、总计耗时、预估总行数、已完成迁移行数、实时流量和 RPS 等信息。

  >**注意：**
  >
  >如果您在选择 **迁移类型** 时未配置 **结构迁移**，则全量校验时，OMS 社区版会以源端和目标端匹配的字段进行校验，不会检查表结构是否一致。

  **全量校验** 页面包括 **全部校验对象** 和 **全量校验性能** 页签：

  * 在 **全部校验对象** 页签，您可以查看校验的进度和校验对象列表。

    * 对于全部迁移对象，均可以查看指定对象的名称、对应源库和目标库、全量校验进度、结果和结果摘要。

    * 支持根据源库和目标库进行筛选。

    * 支持勾选 **只查看已完成对象**，查看当前时间点已完成结构迁移的对象名称等基本信息。

    * 如果您需要对全部迁移对象再次进行全量校验，请单击 **再次校验** \> **重启全量校验**。

    * 存在校检结果不一致的表时：

       如果您需要重新校验表中的全部数据，请单击 **再次校验** \> **重新校验异常的表**。

       如果您仅需要重新校验表中不一致的数据，请单击 **再次校验** \> **仅校验不一致的表记录**。

       >**注意：**
       >
       >如果源端为空，则不支持订正操作。

  * 在 **全量校验性能** 页签，您可以图形化查看 **源端 RPS**、**目标端 RPS**、**源端迁移流量** 和 **目标端迁移流量**，及时了解数据校验的情况。

* **正向切换**

  正向切换（传统意义上的系统割接流程的抽象化、标准化）不会操作业务应用连接的切换，是 OMS 的数据迁移项目配合应用切换前后需要执行的任务流。您需要保证在应用连接切换至目标端前完成正向切换的全部流程。

   正向切换是选择数据迁移便会编排进来的一个流程，您需要终止正向增量同步，删除迁移依赖的附加列和唯一索引，补充在同步过程中被 OMS 过滤掉 Check 约束，并激活目标端 Trigger/FK（迁移前该类对象需要被禁用，否则将引起数据不一致）等，保证新迁移出来的数据库完整、可用。

   如果您配置了反向增量，切换会多编排进来启动反向增量以及禁用源端 Trigger/FK 的子任务，启动从目标端到源端的实时增量同步，保障业务数据回流至原源端数据库，提供随时切换应用的可能性。

* **反向增量**

  展示反向增量的整体状态、启动时间、当前位点时间、完成时间和反向增量性能（延迟时间、迁移流量）。
  
## 查看迁移对象

进入数据迁移项目的详情页面，单击右上角的 **查看迁移对象**。您可以在 **查看迁移对象** 对话框中，查看进行迁移的内容。

* 如果该项目通过 **指定对象** 的方式选择迁移对象，并设置了行过滤等条件，则可以鼠标悬停至目标对象，单击 **查看设置**。

* 如果该项目通过 **匹配规则** 的方式选择迁移对象，则可以查看 **源端对象** 和 **迁移对象规则**。

## 查看组件监控

在数据迁移项目的详情页面，单击右上角的 **查看组件监控**，即可查看 Store、JDBCWriter、Checker-Ful 和 Checker-Verify 组件的信息。您还可以对各组件进行以下操作：

* 启动组件：单击未运行的目标组件后的 **启动**，在对话框中，单击 **确定**。

* 暂停组件：单击运行中的目标组件后的 **暂停**，在对话框中，单击 **确定**。

* 更新组件：单击目标组件后的 **更新**，在 **更新配置** 页面，修改相应配置后，单击 **更新**。

  > **注意：**
  >
  >此处的更新包含重启操作，请谨慎操作。

* 查看日志：单击目标组件后的 **...** \> **查看日志**，**查看日志** 页面为您展示最近的相关运行中产生的日志。您可以进行 **查找**、**下载** 和 **复制**。
