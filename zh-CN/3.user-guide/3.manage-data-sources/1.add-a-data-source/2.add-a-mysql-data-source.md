# 添加 MySQL 数据源

配置好数据源是创建数据迁移项目的前提。启动数据迁移项目前，您必须添加 MySQL 数据库作为源端或者目标端的数据源。本文为您介绍如何在 OceanBase 迁移服务（OceanBase Migration Service，OMS）社区版中添加 MySQL 数据源。

## 前提条件

* 已获取相关数据库的 IP 地址和端口号。
  
* 已存在用于数据迁移的数据库用户。

  建议您为数据迁移项目创建一个专属的数据库用户，该用户必须具备相关的数据操作权限。详情请参见 [用户权限说明](../../2.users-and-privileges/2.user-privileges.md)。
  
## 使用限制

目前支持 MySQL 数据库 5.5、5.6、5.7 和 8.0 版本。

## 操作步骤

1. 登录 OMS 社区版控制台。

2. 在左侧导航栏，单击 **数据源管理**。

3. 在 **数据源管理** 页面，单击右上角的 **添加数据源**。

4. 在 **添加数据源** 面板中，选择 **数据源类型** 为 **MySQL**。

5. 配置各项参数。

   | **参数**  |                                                                                                                                                             **描述**                                                                                                                                                             |
   |---------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   | 数据源标识   | 建议使用中文、数字和字母的组合。名称中不能包含空格，长度不得超过 32 个字符。                   |
   | 地域          | 从下拉列表中选择数据源所属的地域（即部署 OMS 社区版时配置的 `cm_region` 参数）。<br> **注意：**  <ul><li> 仅多地域场景下会显示该参数。   <li>请确保数据源与地域的映射关系保持一致，否则可能导致迁移同步性能较差。    </ul>                 |
   | 数据库属性   | 包括 **主库**、**主库+备库** 和 **备库**。配置主库时，您可以根据自身需求，选择是否勾选 **增量同步时，允许 OMS 向该实例自动写入增量心跳数据**。 <ul><li> 如果勾选，OMS 社区版会向对应的 MySQL 数据库创建并更新 `drc.heartbeat` 表，从而推动 Store 位点，避免出现在源端无业务的情况下，OMS 的延迟信息显示过长的问题。<br> **注意：** <br>此时，MySQL 数据库用户需要具备创建表、写表的权限。详情请参见 [用户权限说明](../../2.users-and-privileges/2.user-privileges.md)。<li>如果不勾选，则 OMS 社区版不会创建 `drc.heartbeat` 表。 |
   | 主机 IP   | 数据库宿主机的 IP。                                                                                                           |
   | 端口      | 数据库宿主机 IP 的端口号。                                                                                                                                      |
   | 用户名     | 用于数据迁移的 MySQL 数据库的用户名称。                                                                                                                                              |
   | 密码      | MySQL 数据库用户的密码。                                                                                                       |
   | DB Name（可选） | MySQL 数据库的名称。                                                                                                     |
   | 备注（可选）      | 数据源的备注信息。                                                                                                  |

6. 单击 **测试连接**，验证 OMS 社区版和数据库的网络连接，以及用户名和密码的有效性。数据库可以作为源端或目标端。

7. 测试连接通过后，单击 **添加**。
