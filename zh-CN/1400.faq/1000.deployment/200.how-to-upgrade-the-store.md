# 如何升级 Store

本文为您介绍如何升级机器上的 Store 版本。

## 升级 Store

从 [rpm 查询](http://rpm.corp.taobao.com/) 页面查询Store 组件所需版本的 RPM 包 oboms-xlog-store，下载至 OMS 机器后使用 `rpm -Uvh` 命令进行安装升级即可。操作示例如下：

```shell
# 查询当前安装版本
[root ~]# rpm -qa oboms-xlog-store
oboms-xlog-store-5.1.1-20220328193528.alios7.x86_64

# 获取新版本的 rpm 包后进行版本升级
[root ~]# rpm -Uvh oboms-xlog-store-5.1.2-20220518152726.alios7.x86_64.rpm
```

## 基于新版本新建 Store

每个 store\[XXXX\] 工作运行目录都是一个沙盒环境，即升级安装 Store RPM 包后，新版本只对新建 Store 有效。新建 Store 的操作如下：

1. 登录 OMS 社区版控制台。

2. 在左侧导航栏，单击 **运维监控** **\>** **组件**，默认进入 **Store** 页面。

3. 在 **Store** 页面，单击右上角的 **新增**。

   * 如果是单地域部署，**Store** 右侧会显示地域信息。
  
   * 如果是多地域部署，您在新增 Store 后，在 **Store** 页面会显示地域列。

4. 在 **新增** 对话框中，配置各项参数。

   |    参数     | 是否必选 |                                               描述                                               |
   |-----------|------|------------------------------------------------------------------------------------------------|
   | Subtopic  | 必选   | 集群或租户维度的数据源，请根据具体任务选择对应 Subtopic。                                                              |
   | Node      | 可选   | 指定启动到哪台机器上。单节点部署时只有一台机器，默认在该机器上创建 Store。在高可用场景，不指定 Node 时，后台将自动调度到未达性能瓶颈的机器上。<br>**注意：**<br>如果仅升级了部分机器，则新增时请注意选择相应的 **Node**。 |
   | Timestamp | 必选   | 时间戳，指定从哪个时间点开始启动 Store。 请确保数据库日志存在，否则会造成 Store 启动失败。                           |

5. 单击 **提交**。
