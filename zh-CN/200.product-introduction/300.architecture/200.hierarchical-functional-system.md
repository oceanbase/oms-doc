# 分层功能体系

本文为您介绍 OceanBase 迁移服务（OceanBase Migration Service，OMS）社区版的功能架构。

![architecture6-zh](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/oms/oms-enterprise/architecture6-zh.png)

* 服务接入层

  主要包括传输项目的管理、各种类型数据源的管理、OMS 社区版各个组件模块的运维和监控，以及告警设置等。
  
* 流程编排层

  主要负责实现上层表结构迁移、启动全量数据迁移/同步、增量数据迁移/同步、数据校检和数据订正，以及链路切换等任务的执行细节。
  
* 组件层

  组件层包括以下模块：

  * OMS 社区版结构迁移的核心组件（DBCat）作为 OceanBase 数据库原生的 Schema 转换引擎，可以根据源端、目标端具体的数据源类型和字符编码类型，进行精确的数据类型映射或转换。

    OMS 社区版的结构迁移组件支持转换、迁移数据库中的表、约束、索引和视图等多种对象。

  * 增量拉取组件 Store
  
    从源实例读取原始数据，经过解析、过滤，以及对数据进行格式化，最终将数据在本地持久化存储。

  * 全量导入组件 Full-Import
  
    负责源库表对象中存量数据的迁移和部分增量数据的同步。

  * 增量同步组件 Incr-Sync
  
    从增量拉取组件中请求增量数据，并根据用户配置的同步对象进行数据过滤，然后在保证事务时序性及事务一致性的前提下，将日志记录同步至目标实例。

  * 全量校验组件 Full-Verification
  
    负责迁移表中的行记录进行全字段校验，并针对不一致的数据生成订正语句。

  * Supervisor 负责对上述组件进行监控。
