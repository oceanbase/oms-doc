# Data formats

This topic describes the data formats used in serialization methods and when data is transmitted from OceanBase Database to a message queue system.

## Data formats used in serialization methods

When you use OceanBase Migration Service (OMS) Community Edition to synchronize data from the source to a Kafka or RocketMQ instance, you can use a serialization method to control the format of the synchronized data. The serialization methods include **Default**, **Canal**, **Dataworks** (version 2.0), **SharePlex**, **DefaultExtendColumnType**, and **Debezium**.

### Default JSON message format

When you synchronize data to a Kafka or RocketMQ instance, the following JSON message format is used for the Default serialization method:

```json
{
 "prevStruct": {  // The image before modification.
   "col1": "val1" // The key-value pair that contains the full key value.
  },
  "postStruct": {  // The image after modification.
   "col1": "val1" // The key-value pair that contains the full key value.
  },
  "allMetaData" {
  "checkpoint": "STRING", // The current synchronization checkpoint, which specifies the target checkpoint (second-level timestamp) in the incremental synchronization phase and the primary key-value pair in the full synchronization phase.
    "record_primary_key": "STRING",  // The name of the primary key column. If the primary key has multiple columns, separate the column values with \u0001.
    "record_primary_value" "STRING", // The primary key value. If the primary key has multiple columns, separate the column values with \u0001.
    "source_identity": "STRING",     // The source ID. The source ID is a subtopic in the case of incremental synchronization. It is a meaningless sequence in the case of full synchronization.
    "dbType": "STRING", // The database type.
    "storeDataSequence": LONG, // This field is available only when the value of sequenceEnabled is true in the source.json configuration file in incremental synchronization scenarios. Default value: true. This field is used for sorting. A sequence is generated during the synchronization process in the timestamp + sequence number format. The sequence number increments and does not exceed five digits.
    "table_name": "STRING", // The table name modified by using an SQL statement.
    "db": "STRING", // The database name to be changed by using an SQL statement. If the specified database is an instance of OceanBase Database Community Edition, the database name includes the tenant name and is in the {tenant}.{database} format.
    "timestamp": "STRING", // The timestamp in seconds for data modification, which is available only for incremental synchronization.
    "uniqueId": "STRING", // The transaction sequence ID passed by STORE during incremental synchronization.
 },
 "recordType": "INSERT/UPDATE/DELETE/HEARTBEAT/DDL" // The modification type.
}
```

* If the DDL records contain only keys with the column name of "ddl", the values are DDL statements.

* Data is represented in the JSON format:

  * prevStruct: The beforeimage of incremental data, which is the data before an SQL statement is executed. The beforeimage exists before the `DELETE` or `UPDATE` operation.

  * postStruct: The afterimage of the incremental data, which is the data after an SQL statement is executed. The afterimage exists after the `INSERT` or `UPDATE` operation.

  * recordType: The data type. Valid values: `INSERT`, `UPDATE`, `DELETE`, `ROW`, and `HEARTBEAT`.

  * allMetaData: The metadata of the message.

* Both prevStruct and postStruct are in the `column name: value` format.

Sample data:

* Example of data insertion (INSERT)

   ```json
   {
     "allMetaData":{
       "checkpoint":null,
       "record_primary_key":"int8\u0001int16",
       "source_identity":null,
       "record_primary_value":"3\u0001129",
       "dbType":"OB_MYSQL",
       "table_name":"table_name",
       "db":"tenant.database",
       "timestamp":"1609344671"
     },
     "prevStruct":null,
     "recordType":"INSERT",
     "postStruct":{
       "col1":3,
       "col2":129,
       "col3":2147483646,
       "col4":9223372036854775806,
       "col5":10223372036854775806,
       "col6":1.2222,
       "col7":9.999999,
       "col8":"hello world",
       "col9":"aGVsbG8gd29ybGQ=",
       "col10":9.99999999999,
       "col11":"2020-11-25",
       "col12":"00:01:02",
       "col13":"2020-11-25 00:01:02",
       "col14":"1606233662.012345",
     }
   }
   ```

* Example of data update (UPDATE)

   ```json
   {
     "allMetaData": {
       "checkpoint": null,
       "record_primary_key": "int8\u0001int16",
       "source_identity": null,
       "record_primary_value": "3\u0001129",
       "dbType":"OB_MYSQL",
       "table_name": "table_name",
       "db": "tenant.database",
       "timestamp": "1609344671"
     },
     "prevStruct": {
       "col1": 3,
       "col2": 129,
       "col3": 2147483646,
       "col4": 9223372036854775806,
       "col5": 10223372036854775806,
       "col6": 1.2222,
       "col7": 9.999999999999,
       "col8": "hello world",
       "col9": "aGVsbG8gd29ybGQ=",
       "col10": 9.999999999999,
       "col11": "2020-11-25",
       "col12": "00:01:02",
       "col13": "2020-11-25 00:01:02",
       "col14": "1606233662.012345",
     },
     "recordType": "UPDATE",
     "postStruct": {
       "col1": 3,
       "col2": 129,
       "col3": 2147483646,
       "col4": 9223372036854775806,
       "col5": 10223372036854775806,
       "col6": 1.2222,
       "col7": 9.999999999999,
       "col8": "hello world 2020",
       "col9": "aGVsbG8gd29ybGQ=",
       "col10": 9.999999999999,
       "col11": "2020-11-25",
       "col12": "00:01:02",
       "col13": "2020-11-25 00:01:02",
       "col14": "1606233662.012345",
     }
   }
   ```

* Example of data deletion (DELETE)

   ```json
   {
     "allMetaData":{
       "checkpoint":null,
       "record_primary_key":"int8\u0001int16",
       "source_identity":null,
       "record_primary_value":"3\u0001129",
       "dbType":"OB_MYSQL",
       "table_name":"table_name",
       "db":"tenant.database",
       "timestamp":"1609344671"
     },
     "prevStruct":{
       "col1":3,
       "col2":129,
       "col3":2147483646,
       "col4":9223372036854775806,
       "col5":10223372036854775806,
       "col16":1.2222,
       "col7":9.99999999,
       "col8":"hello world",
       "col9":"aGVsbG8gd29ybGQ=",
       "col10":9.999999999,
       "col11":"2020-11-25",
       "col12":"00:01:02",
       "col13":"2020-11-25 00:01:02",
       "col14":"1606233662.012345"
     },
     "recordType":"DELETE",
     "postStruct":null
   }
   ```

### Canal-compatible JSON message format

When you synchronize data to a Kafka or RocketMQ instance, the following JSON message format is used for the Canal serialization method:

```json
{
 "table": "STRING", // The table name to be changed by using an SQL statement. If the specified database is an instance of OceanBase Database Community Edition, only the database name is required.
  "sqlType": {
   "col1": INTEGER, // Indicates that the INTEGER column type is modified. For more information, see java.sql.Types.
  },
  "data": [ // The modified data key-value pair, which contains only one message.
    {
     "col1": "val1"
    }
  ],
  "pkNames": [ // The name of the primary key column.
   "col1"
  ],
  "old": [ // This field exists only in update messages and indicates the column value before the modification by using the UPDATE statement.
    {
     "col1": "val1"
    }
  ],
  "mysqlType": { // The description of the column type.
   "col": "STRING"
  },
  "type": "STRING",  // The modification type.
  "table": "STRING", // The table name modified by using an SQL statement.
  "es": LONG, // The time of modification, in a millisecond-level timestamp.
  "isDdl": BOOLEAN, // Indicates whether the statement is a DDL statement.
  "ts": LONG, // The timestamp written into the destination database.
  "sql": "STRING", // It is empty.
}
```

Sample data:

* Example of data insertion (`INSERT`)

   ```json
   {
     "database":"database",
     "sqlType":{
       "col1":93,
       "col2":12,
       "col3":6,
       "col4":8,
       "col5":5,
       "col6":92,
       "col7":4,
       "col8":-5,
       "col9":2004,
       "col10":-6,
       "col11":91,
       "col12":3,
       "col13":-5,
       "col14":93
     },
     "data":[
       {
         "col1":"2020-11-25 00:01:02",
         "col2":"hello world",
         "col3":1.2222,
         "col4":9.99999999999999909326625337248461995470488734032045693707225049331647881341002217023668530611028595157578301758491822824378438792553200763769833775473829862512856683413461939989729065436937279228852476622948659167943435544622149348072943613294167216662821737555414480159115639791276054897201420389770580351533960771506199055664889770260291710977826725024401716523031627390652604144008597950935492433262042405635563993262949691698930975461134804791235994697938405200089317860731205010159117711704697471514344499487123311264707354172378099538737850219826145102366279591379660471881259976727356521602405329789906247763521525981391443887618575275588619928089116905061711975308467857756405810961619074331866883961080943542712559830853980002984826569445431232452392578125E-308,
         "col5":129,
         "col6":"00:01:02",
         "col7":2147483646,
         "col8":9223372036854775806,
         "col9":"aGVsbG8gd29ybGQ=",
         "col10":3,
         "col11":"2020-11-25",
         "col12":9.99999999999999909326625337248461995470488734032045693707225049331647881341002217023668530611028595157578301758491822824378438792553200763769833775473829862512856683413461939989729065436937279228852476622948659167943435544622149348072943613294167216662821737555414480159115639791276054897201420389770580351533960771506199055664889770260291710977826725024401716523031627390652604144008597950935492433262042405635563993262949691698930975461134804791235994697938405200089317860731205010159117711704697471514344499487123311264707354172378099538737850219826145102366279591379660471881259976727356521602405329789906247763521525981391443887618575275588619928089116905061711975308467857756405810961619074331866883961080943542712559830853980002984826569445431232452392578125E-308,
         "col13":10223372036854775806,
         "col14":"1606233662.012345"
       }
     ],
     "pkNames":[
       "col1",
       "col2"
     ],
     "old":null,
     "mysqlType":{
       "col1":"datetime",
       "col2":"varchar",
       "col3":"float",
       "col4":"double",
       "col5":"smallint",
       "col6":"time",
       "col7":"int",
       "col8":"int64",
       "col9":"blob",
       "col10":"tinyint",
       "col11":"date",
       "col12":"decimal",
       "col13":"bigint",
       "col14":"timestamp"
     },
     "type":"INSERT",
     "table":"table",
     "es":1609344671000,
     "isDdl":false,
     "ts":1618323429026,
     "sql":""
   }
   ```

* Example of data update (`UPDATE`)

   ```json
   {
     "database":"database",
     "sqlType":{
       "col1":93,
       "col2":12,
       "col3":6,
       "col4":8,
       "col5":5,
       "col6":92,
       "col7":4,
       "col8":-5,
       "col9":2004,
       "col10":-6,
       "col11":91,
       "col12":3,
       "col13":-5,
       "col14":93
     },
     "data":[
       {
         "col1":"2020-11-25 00:01:02",
         "col2":"hello world 2020",
         "col3":1.2222,
         "col4":9.99999999999999909326625337248461995470488734032045693707225049331647881341002217023668530611028595157578301758491822824378438792553200763769833775473829862512856683413461939989729065436937279228852476622948659167943435544622149348072943613294167216662821737555414480159115639791276054897201420389770580351533960771506199055664889770260291710977826725024401716523031627390652604144008597950935492433262042405635563993262949691698930975461134804791235994697938405200089317860731205010159117711704697471514344499487123311264707354172378099538737850219826145102366279591379660471881259976727356521602405329789906247763521525981391443887618575275588619928089116905061711975308467857756405810961619074331866883961080943542712559830853980002984826569445431232452392578125E-308,
         "col5":129,
         "col6":"00:01:02",
         "col7":2147483646,
         "col8":9223372036854775806,
         "col9":"aGVsbG8gd29ybGQ=",
         "col10":3,
         "col11":"2020-11-25",
         "col12":9.99999999999999909326625337248461995470488734032045693707225049331647881341002217023668530611028595157578301758491822824378438792553200763769833775473829862512856683413461939989729065436937279228852476622948659167943435544622149348072943613294167216662821737555414480159115639791276054897201420389770580351533960771506199055664889770260291710977826725024401716523031627390652604144008597950935492433262042405635563993262949691698930975461134804791235994697938405200089317860731205010159117711704697471514344499487123311264707354172378099538737850219826145102366279591379660471881259976727356521602405329789906247763521525981391443887618575275588619928089116905061711975308467857756405810961619074331866883961080943542712559830853980002984826569445431232452392578125E-308,
         "col13":10223372036854775806,
         "col14":"1606233662.012345"
       }
     ],
     "pkNames":[
       "col1",
       "col2"
     ],
     "old":[
       {
         "string":"hello world"
       }
     ],
     "mysqlType":{
       "col1":"datetime",
       "col2":"varchar",
       "col3":"float",
       "col4":"double",
       "col5":"smallint",
       "col6":"time",
       "col7":"int",
       "col8":"int64",
       "col9":"blob",
       "col10":"tinyint",
       "col11":"date",
       "col12":"decimal",
       "col13":"bigint",
       "col14":"timestamp"
     },
     "type":"UPDATE",
     "table":"table",
     "es":1609344671000,
     "isDdl":false,
     "ts":1618364572908,
     "sql":""
   }
   ```

* Example of data deletion (`DELETE`)

   ```json
   {
     "database":"database",
     "sqlType":{
       "col1":93,
       "col2":12,
       "col3":6,
       "col4":8,
       "col5":5,
       "col6":92,
       "col7":4,
       "col8":-5,
       "col9":2004,
       "col10":-6,
       "col11":91,
       "col12":3,
       "col13":-5,
       "col14":93
     },
     "data":[
       {
         "col1":"2020-11-25 00:01:02",
         "col2":"hello world",
         "col3":1.2222,
         "col4":9.99999999999999909326625337248461995470488734032045693707225049331647881341002217023668530611028595157578301758491822824378438792553200763769833775473829862512856683413461939989729065436937279228852476622948659167943435544622149348072943613294167216662821737555414480159115639791276054897201420389770580351533960771506199055664889770260291710977826725024401716523031627390652604144008597950935492433262042405635563993262949691698930975461134804791235994697938405200089317860731205010159117711704697471514344499487123311264707354172378099538737850219826145102366279591379660471881259976727356521602405329789906247763521525981391443887618575275588619928089116905061711975308467857756405810961619074331866883961080943542712559830853980002984826569445431232452392578125E-308,
         "col5":129,
         "col6":"00:01:02",
         "col7":2147483646,
         "col8":9223372036854775806,
         "col9":"aGVsbG8gd29ybGQ=",
         "col10":3,
         "col11":"2020-11-25",
         "col12":9.99999999999999909326625337248461995470488734032045693707225049331647881341002217023668530611028595157578301758491822824378438792553200763769833775473829862512856683413461939989729065436937279228852476622948659167943435544622149348072943613294167216662821737555414480159115639791276054897201420389770580351533960771506199055664889770260291710977826725024401716523031627390652604144008597950935492433262042405635563993262949691698930975461134804791235994697938405200089317860731205010159117711704697471514344499487123311264707354172378099538737850219826145102366279591379660471881259976727356521602405329789906247763521525981391443887618575275588619928089116905061711975308467857756405810961619074331866883961080943542712559830853980002984826569445431232452392578125E-308,
         "col13":10223372036854775806,
         "col14":"1606233662.012345"
       }
     ],
     "pkNames":[
       "int8",
       "int16"
     ],
     "old":null,
     "mysqlType":{
       "col1":"datetime",
       "col2":"varchar",
       "col3":"float",
       "col4":"double",
       "col5":"smallint",
       "col6":"time",
       "col7":"int",
       "col8":"int64",
       "col9":"blob",
       "col10":"tinyint",
       "col11":"date",
       "col12":"decimal",
       "col13":"bigint",
       "col14":"timestamp"
     },
     "type":"DELETE",
     "table":"table",
     "es":1609344671000,
     "isDdl":false,
     "ts":1618364660278,
     "sql":""
   }
   ```

### Dataworks-compatible JSON message format

When you synchronize data to a Kafka or RocketMQ instance, the following JSON message format is used for the Dataworks serialization method:

```json
{
 "version":"2.0", // The protocol version. Only DataWorks 2.0 is supported.
 "schema": { // The modified metadata information, with only the column name and column type specified.
 "source": {// The source of the modification.
  "dbType": "mysql", // The source type.
  "dbVersion": "5.7.35", // The database version.
  "dbName": "myDatabase", // The database name.
  "schema": "mySchema", // The schema name. This field is required in a system with schemas.
  "table": "tableName" // The table name.
 }
 "column": [// The modified data column. This field indicates the updated record content in the target table.
  {
  "name": "id",
  "type": "bigint"
  },
  {
  "name": "name",
  "type": "varchar(20)"
  },
  {
  "name": "mydata",
  "type": "binary"
  },
  {
  "name": "ts",
  "type": "datetime"
  }
 ],
 "pk": [// This field is required if a primary key or unique key is available. Otherwise, it is optional.
  "pkName1",
  "pkName2"
 ]
},
"payload": {
 "before": {
  "data":{
   "id": 111,
   "name":"scooter",
   "mydata": "[base64 string]", // Base64 encoding is required for the binary type.
   "ts": 1590315269000.123456789 // The timestamp, with a 13-digit integer part and a 9-digit fractional part.
  }
 },
 "after": {
  "data":{
   "id": 222,
   "name":"donald",
   "mydata": "[base64 string]",
   "ts": 1590315269000
  }
 },
 "op":"INSERT/UPDATE/DELETE/HEARTBEAT/TRANSACTION_BEGIN/TRANSACTION_END/CREATE/ALTE
R/ERASE/QUERY/TRUNCATE/RENAME/CINDEX/DINDEX/GTID/XACOMMIT/XAROLLBACK/...",// The statements are case sensitive.
 "timestamp": {
  "eventTime": 1620457659000 // The time of modification in the source database, which is a 13-digit timestamp in milliseconds.
 },
 "ddl": {
  "text": "ADD COLUMN ..."
 },
 "scn": "The system change number (SCN) that increments."
},
"extend": { // The extend field that can be used for meeting extension requirements in the future. This field can be left unspecified if no extension is available.
 "load_fm":"CIBS", // The source system, such as CIBS.
 }
}
```

Heartbeat message of a synchronization task:

```json
{
 "version":"2.0", // The protocol version.
 "payload": {
 "timestamp": {
  "eventTime": 1620457659000 // The timestamp of the heartbeat packet.
 },
 "op": "HEARTBEAT" // Indicates a heartbeat packet.
 }
}
```

Sample data:

* Example of data insertion (`INSERT`)

   ```json
   {
       "version":"2.0",
       "schema":{
           "source":{
               "dbType":"ob_mysql",
               "dbVersion":null,
               "dbName":"db",
               "schema":null,
               "table":"tab"
           },
           "column":[
               {
                   "name":"int8",
                   "type":"TINYINT"
               },
               {
                   "name":"int16",
                   "type":"SMALLINT"
               },
               {
                   "name":"int32",
                   "type":"INT"
               },
               {
                   "name":"int64",
                   "type":"INT64"
               },
               {
                   "name":"float32",
                   "type":"FLOAT"
               },
               {
                   "name":"float64",
                   "type":"DOUBLE"
               },
               {
                   "name":"bigInt",
                   "type":"BIGINT"
               },
               {
                   "name":"boolean",
                   "type":"BOOLEAN"
               },
               {
                   "name":"string",
                   "type":"VARCHAR"
               },
               {
                   "name":"bytes",
                   "type":"BLOB"
               },
               {
                   "name":"decimal",
                   "type":"DECIMAL"
               },
               {
                   "name":"localDate",
                   "type":"DATE"
               },
               {
                   "name":"localTime",
                   "type":"TIME"
               },
               {
                   "name":"localDateTime",
                   "type":"DATETIME"
               },
               {
                   "name":"timestamp",
                   "type":"TIMESTAMP"
               },
               {
                   "name":"zonedDateTime",
                   "type":"ZONED_DATETIME"
               },
               {
                   "name":"intervalDayToSecond",
                   "type":"INTERVAL_DAY_TO_SECOND"
               },
               {
                   "name":"intervalYearToMonth",
                   "type":"INTERVAL_YEAR_TO_MONTH"
               }
           ],
           "pk":[
               "pkName1",
               "pkName12"
           ]
       },
       "payload":{
           "before":null,
           "after":{
               "data":{
                   "col1":3,
                   "col2":129,
                   "col3":2147483646,
                   "col4":9223372036854775806,
                   "col5":1.2222,
                   "col6":0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000999999999999999909326625337248461995470488734032045693707225049331647881341002217023668530611028595157578301758491822824378438792553200763769833775473829862512856683413461939989729065436937279228852476622948659167943435544622149348072943613294167216662821737555414480159115639791276054897201420389770580351533960771506199055664889770260291710977826725024401716523031627390652604144008597950935492433262042405635563993262949691698930975461134804791235994697938405200089317860731205010159117711704697471514344499487123311264707354172378099538737850219826145102366279591379660471881259976727356521602405329789906247763521525981391443887618575275588619928089116905061711975308467857756405810961619074331866883961080943542712559830853980002984826569445431232452392578125,
                   "col7":10223372036854775806,
                   "col8":1,
                   "col9":"hello world",
                   "col10":"aGVsbG8gd29ybGQ=",
                   "col11":0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000999999999999999909326625337248461995470488734032045693707225049331647881341002217023668530611028595157578301758491822824378438792553200763769833775473829862512856683413461939989729065436937279228852476622948659167943435544622149348072943613294167216662821737555414480159115639791276054897201420389770580351533960771506199055664889770260291710977826725024401716523031627390652604144008597950935492433262042405635563993262949691698930975461134804791235994697938405200089317860731205010159117711704697471514344499487123311264707354172378099538737850219826145102366279591379660471881259976727356521602405329789906247763521525981391443887618575275588619928089116905061711975308467857756405810961619074331866883961080943542712559830853980002984826569445431232452392578125,
                   "col12":"2020-11-25",
                   "col13":"00:01:02",
                   "col14":"2020-11-25 00:01:02",
                   "col15":"1606233662.012345",
                   "col16":"2020-11-25 00:01:02.012345 Asia/Shanghai",
                   "col17":"INTERVAL '3' DAY",
                   "col18":"INTERVAL '4' YEAR"
               }
           },
           "op":"INSERT",
           "timestamp":{
               "eventTime":1647581000000,
               "systemTime":1647581000795,
               "checkpointTime":1647581000
           },
           "ddl":null,
           "scn":"null"
       },
       "extend":{
           "load_fm": "test"
       }
   }
   ```

* Example of data update (`UPDATE`)

   ```json
   {
       "version":"2.0",
       "schema":{
           "source":{
               "dbType":"ob_mysql",
               "dbVersion":null,
               "dbName":"db",
               "schema":null,
               "table":"tab"
           },
           "column":[
               {
                   "name":"int8",
                   "type":"TINYINT"
               },
               {
                   "name":"int16",
                   "type":"SMALLINT"
               },
               {
                   "name":"int32",
                   "type":"INT"
               },
               {
                   "name":"int64",
                   "type":"INT64"
               },
               {
                   "name":"float32",
                   "type":"FLOAT"
               },
               {
                   "name":"float64",
                   "type":"DOUBLE"
               },
               {
                   "name":"bigInt",
                   "type":"BIGINT"
               },
               {
                   "name":"boolean",
                   "type":"BOOLEAN"
               },
               {
                   "name":"string",
                   "type":"VARCHAR"
               },
               {
                   "name":"bytes",
                   "type":"BLOB"
               },
               {
                   "name":"decimal",
                   "type":"DECIMAL"
               },
               {
                   "name":"localDate",
                   "type":"DATE"
               },
               {
                   "name":"localTime",
                   "type":"TIME"
               },
               {
                   "name":"localDateTime",
                   "type":"DATETIME"
               },
               {
                   "name":"timestamp",
                   "type":"TIMESTAMP"
               },
               {
                   "name":"zonedDateTime",
                   "type":"ZONED_DATETIME"
               },
               {
                   "name":"intervalDayToSecond",
                   "type":"INTERVAL_DAY_TO_SECOND"
               },
               {
                   "name":"intervalYearToMonth",
                   "type":"INTERVAL_YEAR_TO_MONTH"
               }
           ],
           "pk":[
               "pkName1",
               "pkName2"
           ]
       },
       "payload":{
           "before":{
               "data":{
                   "col1":3,
                   "col2":129,
                   "col3":2147483646,
                   "col4":9223372036854775806,
                   "col5":1.2222,
                   "col6":0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000999999999999999909326625337248461995470488734032045693707225049331647881341002217023668530611028595157578301758491822824378438792553200763769833775473829862512856683413461939989729065436937279228852476622948659167943435544622149348072943613294167216662821737555414480159115639791276054897201420389770580351533960771506199055664889770260291710977826725024401716523031627390652604144008597950935492433262042405635563993262949691698930975461134804791235994697938405200089317860731205010159117711704697471514344499487123311264707354172378099538737850219826145102366279591379660471881259976727356521602405329789906247763521525981391443887618575275588619928089116905061711975308467857756405810961619074331866883961080943542712559830853980002984826569445431232452392578125,
                   "col7":10223372036854775806,
                   "col8":1,
                   "col9":"hello world",
                   "col10":"aGVsbG8gd29ybGQ=",
                   "col11":0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000999999999999999909326625337248461995470488734032045693707225049331647881341002217023668530611028595157578301758491822824378438792553200763769833775473829862512856683413461939989729065436937279228852476622948659167943435544622149348072943613294167216662821737555414480159115639791276054897201420389770580351533960771506199055664889770260291710977826725024401716523031627390652604144008597950935492433262042405635563993262949691698930975461134804791235994697938405200089317860731205010159117711704697471514344499487123311264707354172378099538737850219826145102366279591379660471881259976727356521602405329789906247763521525981391443887618575275588619928089116905061711975308467857756405810961619074331866883961080943542712559830853980002984826569445431232452392578125,
                   "col12":"2020-11-25",
                   "col13":"00:01:02",
                   "col14":"2020-11-25 00:01:02",
                   "col15":"1606233662.012345",
                   "col16":"2020-11-25 00:01:02.012345 Asia/Shanghai",
                   "col17":"INTERVAL '3' DAY",
                   "col18":"INTERVAL '4' YEAR"
               }
           },
           "after":{
               "data":{
                   "col1":3,
                   "col2":129,
                   "col3":2147483646,
                   "col4":9223372036854775806,
                   "col5":1.2222,
                   "col6":0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000999999999999999909326625337248461995470488734032045693707225049331647881341002217023668530611028595157578301758491822824378438792553200763769833775473829862512856683413461939989729065436937279228852476622948659167943435544622149348072943613294167216662821737555414480159115639791276054897201420389770580351533960771506199055664889770260291710977826725024401716523031627390652604144008597950935492433262042405635563993262949691698930975461134804791235994697938405200089317860731205010159117711704697471514344499487123311264707354172378099538737850219826145102366279591379660471881259976727356521602405329789906247763521525981391443887618575275588619928089116905061711975308467857756405810961619074331866883961080943542712559830853980002984826569445431232452392578125,
                   "col7":10223372036854775806,
                   "col8":1,
                   "col9":"hello world 2020",
                   "col10":"aGVsbG8gd29ybGQ=",
                   "col11":0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000999999999999999909326625337248461995470488734032045693707225049331647881341002217023668530611028595157578301758491822824378438792553200763769833775473829862512856683413461939989729065436937279228852476622948659167943435544622149348072943613294167216662821737555414480159115639791276054897201420389770580351533960771506199055664889770260291710977826725024401716523031627390652604144008597950935492433262042405635563993262949691698930975461134804791235994697938405200089317860731205010159117711704697471514344499487123311264707354172378099538737850219826145102366279591379660471881259976727356521602405329789906247763521525981391443887618575275588619928089116905061711975308467857756405810961619074331866883961080943542712559830853980002984826569445431232452392578125,
                   "col12":"2020-11-25",
                   "col13":"00:01:02",
                   "col14":"2020-11-25 00:01:02",
                   "col15":"1606233662.012345",
                   "col16":"2020-11-25 00:01:02.012345 Asia/Shanghai",
                   "col17":"INTERVAL '3' DAY",
                   "col18":"INTERVAL '4' YEAR"
               }
           },
           "op":"UPDATE",
           "timestamp":{
               "eventTime":1647581038000,
               "systemTime":1647581038674,
               "checkpointTime":1647581038
           },
           "ddl":null,
           "scn":"null"
       },
       "extend":{
           "load_fm": "test"
       }
   }
   ```

* Example of data deletion (`DELETE`)

   ```json
   {
       "version":"2.0",
       "schema":{
           "source":{
               "dbType":"ob_mysql",
               "dbVersion":null,
               "dbName":"db",
               "schema":null,
               "table":"tab"
           },
           "column":[
               {
                   "name":"int8",
                   "type":"TINYINT"
               },
               {
                   "name":"int16",
                   "type":"SMALLINT"
               },
               {
                   "name":"int32",
                   "type":"INT"
               },
               {
                   "name":"int64",
                   "type":"INT64"
               },
               {
                   "name":"float32",
                   "type":"FLOAT"
               },
               {
                   "name":"float64",
                   "type":"DOUBLE"
               },
               {
                   "name":"bigInt",
                   "type":"BIGINT"
               },
               {
                   "name":"boolean",
                   "type":"BOOLEAN"
               },
               {
                   "name":"string",
                   "type":"VARCHAR"
               },
               {
                   "name":"bytes",
                   "type":"BLOB"
               },
               {
                   "name":"decimal",
                   "type":"DECIMAL"
               },
               {
                   "name":"localDate",
                   "type":"DATE"
               },
               {
                   "name":"localTime",
                   "type":"TIME"
               },
               {
                   "name":"localDateTime",
                   "type":"DATETIME"
               },
               {
                   "name":"timestamp",
                   "type":"TIMESTAMP"
               },
               {
                   "name":"zonedDateTime",
                   "type":"ZONED_DATETIME"
               },
               {
                   "name":"intervalDayToSecond",
                   "type":"INTERVAL_DAY_TO_SECOND"
               },
               {
                   "name":"intervalYearToMonth",
                   "type":"INTERVAL_YEAR_TO_MONTH"
               }
           ],
           "pk":[
               "pkName1",
               "pkName2"
           ]
       },
       "payload":{
           "before":{
               "data":{
                   "col1":3,
                   "col2":129,
                   "col3":2147483646,
                   "col4":9223372036854775806,
                   "col5":1.2222,
                   "col6":0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000999999999999999909326625337248461995470488734032045693707225049331647881341002217023668530611028595157578301758491822824378438792553200763769833775473829862512856683413461939989729065436937279228852476622948659167943435544622149348072943613294167216662821737555414480159115639791276054897201420389770580351533960771506199055664889770260291710977826725024401716523031627390652604144008597950935492433262042405635563993262949691698930975461134804791235994697938405200089317860731205010159117711704697471514344499487123311264707354172378099538737850219826145102366279591379660471881259976727356521602405329789906247763521525981391443887618575275588619928089116905061711975308467857756405810961619074331866883961080943542712559830853980002984826569445431232452392578125,
                   "col7":10223372036854775806,
                   "col8":1,
                   "col9":"hello world",
                   "col10":"aGVsbG8gd29ybGQ=",
                   "col11":0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000999999999999999909326625337248461995470488734032045693707225049331647881341002217023668530611028595157578301758491822824378438792553200763769833775473829862512856683413461939989729065436937279228852476622948659167943435544622149348072943613294167216662821737555414480159115639791276054897201420389770580351533960771506199055664889770260291710977826725024401716523031627390652604144008597950935492433262042405635563993262949691698930975461134804791235994697938405200089317860731205010159117711704697471514344499487123311264707354172378099538737850219826145102366279591379660471881259976727356521602405329789906247763521525981391443887618575275588619928089116905061711975308467857756405810961619074331866883961080943542712559830853980002984826569445431232452392578125,
                   "col12":"2020-11-25",
                   "col13":"00:01:02",
                   "col14":"2020-11-25 00:01:02",
                   "col15":"1606233662.012345",
                   "col16":"2020-11-25 00:01:02.012345 Asia/Shanghai",
                   "col17":"INTERVAL '3' DAY",
                   "col18":"INTERVAL '4' YEAR"
               }
           },
           "after":null,
           "op":"DELETE",
           "timestamp":{
               "eventTime":1647581072000,
               "systemTime":1647581072976,
               "checkpointTime":1647581072
           },
           "ddl":null,
           "scn":"null"
       },
       "extend":{
           "load_fm": "test"
       }
   }
   ```

### SharePlex-compatible JSON message format

When you synchronize data to a Kafka or RocketMQ instance, the following JSON message format is used for the SharePlex serialization method:

```json
{
 "data": { // The modified data key-value pair. If an INSERT or a DELETE statement is executed, the value is the full value. If an UPDATE statement is executed, the value is the modified value.
   "col1": "val1"
  },
  "meta": {
    "time": "YYYY-MM-DDTHH:mm:ss",  // The time of modification.
    "op": "", // The modification type. Valid values: ins, upd, and del.
    "posttime": "YYYY-MM-DDTHH:mm:ss",  // The time at which data is written to the destination.
    "idx":"STRING", // Indexes of messages in the transaction/Number of index messages. OMS Community Edition does not count the total number of transactions. Therefore, this parameter is invalid.
    "size": NUMBER, // The number of messages in the transaction. This parameter is deprecated.
    "seq": "STRING",   // The sorting sequence. This field is available only when transactionEnabled is set to true in the source database.
    "table": "STRING", // The database and table name in the {database}.{table} format modified by using an SQL statement.
    "rowid": "STRING", // A string in the format of {Database to be changed.Table name to be changed}-{Primary key value}. If the primary key has multiple columns, separate the column values with \u0001.
    "trans": "STRING", // The transaction ID.
    "scn": "STRING",   // This field is available only when the value of sequenceEnabled is true in the source.json configuration file during incremental synchronization. Default value: true. This field is used for sorting. A sequence is generated during the synchronization process in the timestamp + sequence number format. The sequence number increments and does not exceed five digits.
  },
  "key": { // The key value before modification, which is available only for modifications by using an UPDATE statement.
  }
}
```

Sample data:

* Example of data insertion (`INSERT`)

   ```json
   {
     "data":{
       "col1":"2020-11-25 00:01:02",
       "col2":"hello world",
       "col3":"INTERVAL '3' DAY",
       "col4":1.2222,
       "col5":9.99999999999999909326625337248461995470488734032045693707225049331647881341002217023668530611028595157578301758491822824378438792553200763769833775473829862512856683413461939989729065436937279228852476622948659167943435544622149348072943613294167216662821737555414480159115639791276054897201420389770580351533960771506199055664889770260291710977826725024401716523031627390652604144008597950935492433262042405635563993262949691698930975461134804791235994697938405200089317860731205010159117711704697471514344499487123311264707354172378099538737850219826145102366279591379660471881259976727356521602405329789906247763521525981391443887618575275588619928089116905061711975308467857756405810961619074331866883961080943542712559830853980002984826569445431232452392578125E-308,
       "col6":129,
       "col7":"00:01:02",
       "col8":1,
       "col9":"2020-11-25 00:01:02.012345 Asia/Shanghai",
       "col10":2147483646,
       "col11":9223372036854775806,
       "col12":"aGVsbG8gd29ybGQ=",
       "col13":"INTERVAL '4' YEAR",
       "col14":3,
       "col15":"2020-11-25",
       "col16":9.99999999999999909326625337248461995470488734032045693707225049331647881341002217023668530611028595157578301758491822824378438792553200763769833775473829862512856683413461939989729065436937279228852476622948659167943435544622149348072943613294167216662821737555414480159115639791276054897201420389770580351533960771506199055664889770260291710977826725024401716523031627390652604144008597950935492433262042405635563993262949691698930975461134804791235994697938405200089317860731205010159117711704697471514344499487123311264707354172378099538737850219826145102366279591379660471881259976727356521602405329789906247763521525981391443887618575275588619928089116905061711975308467857756405810961619074331866883961080943542712559830853980002984826569445431232452392578125E-308,
       "col17":10223372036854775806,
       "col18":"1606233662.012345"
     },
     "meta":{
       "posttime":"2020-12-07T13:22:00",
       "op":"ins",
       "size":10,
       "time":"2020-11-25T00:01:02",
       "idx":"1/10",
       "seq":1,
       "table":"mock_database.mock_table",
       "rowid":"mock_database.mock_table-3\u0001129",
       "trans":"shareplex_transaction_id",
       "scn":"123456789"
     }
   }
   ```

* Example of data update (`UPDATE`)

   ```json
   {
     "data":{
       "string":"hello world 2020"
     },
     "meta":{
       "posttime":"2020-12-07T13:59:09",
       "op":"upd",
       "size":10,
       "time":"2020-11-25T00:01:02",
       "idx":"1/10",
       "seq":1,
       "table":"mock_database.mock_table",
       "rowid":"mock_database.mock_table-3\u0001129",
       "trans":"shareplex_transaction_id",
       "scn":"123456789"
     },
     "key":{
       "col1":"2020-11-25 00:01:02",
       "col2":"hello world",
       "col3":"INTERVAL '3' DAY",
       "col4":1.2222,
       "col5":9.99999999999999909326625337248461995470488734032045693707225049331647881341002217023668530611028595157578301758491822824378438792553200763769833775473829862512856683413461939989729065436937279228852476622948659167943435544622149348072943613294167216662821737555414480159115639791276054897201420389770580351533960771506199055664889770260291710977826725024401716523031627390652604144008597950935492433262042405635563993262949691698930975461134804791235994697938405200089317860731205010159117711704697471514344499487123311264707354172378099538737850219826145102366279591379660471881259976727356521602405329789906247763521525981391443887618575275588619928089116905061711975308467857756405810961619074331866883961080943542712559830853980002984826569445431232452392578125E-308,
       "col6":129,
       "col7":"00:01:02",
       "col8":1,
       "col9":"2020-11-25 00:01:02.012345 Asia/Shanghai",
       "col10":2147483646,
       "col11":9223372036854775806,
       "col12":"aGVsbG8gd29ybGQ=",
       "col13":"INTERVAL '4' YEAR",
       "col14":3,
       "col15":"2020-11-25",
       "col16":9.99999999999999909326625337248461995470488734032045693707225049331647881341002217023668530611028595157578301758491822824378438792553200763769833775473829862512856683413461939989729065436937279228852476622948659167943435544622149348072943613294167216662821737555414480159115639791276054897201420389770580351533960771506199055664889770260291710977826725024401716523031627390652604144008597950935492433262042405635563993262949691698930975461134804791235994697938405200089317860731205010159117711704697471514344499487123311264707354172378099538737850219826145102366279591379660471881259976727356521602405329789906247763521525981391443887618575275588619928089116905061711975308467857756405810961619074331866883961080943542712559830853980002984826569445431232452392578125E-308,
       "col17":10223372036854775806,
       "col18":"1606233662.012345"
     }
   }
   ```

* Example of data deletion (`DELETE`)

   ```json
   {
     "data":{
       "col1":"2020-11-25 00:01:02",
       "col2":"hello world",
       "col3":"INTERVAL '3' DAY",
       "col4":1.2222,
       "col5":9.99999999999999909326625337248461995470488734032045693707225049331647881341002217023668530611028595157578301758491822824378438792553200763769833775473829862512856683413461939989729065436937279228852476622948659167943435544622149348072943613294167216662821737555414480159115639791276054897201420389770580351533960771506199055664889770260291710977826725024401716523031627390652604144008597950935492433262042405635563993262949691698930975461134804791235994697938405200089317860731205010159117711704697471514344499487123311264707354172378099538737850219826145102366279591379660471881259976727356521602405329789906247763521525981391443887618575275588619928089116905061711975308467857756405810961619074331866883961080943542712559830853980002984826569445431232452392578125E-308,
       "col6":129,
       "col7":"00:01:02",
       "col8":1,
       "col9":"2020-11-25 00:01:02.012345 Asia/Shanghai",
       "col10":2147483646,
       "col11":9223372036854775806,
       "col12":"aGVsbG8gd29ybGQ=",
       "col13":"INTERVAL '4' YEAR",
       "col14":3,
       "col15":"2020-11-25",
       "col16":9.99999999999999909326625337248461995470488734032045693707225049331647881341002217023668530611028595157578301758491822824378438792553200763769833775473829862512856683413461939989729065436937279228852476622948659167943435544622149348072943613294167216662821737555414480159115639791276054897201420389770580351533960771506199055664889770260291710977826725024401716523031627390652604144008597950935492433262042405635563993262949691698930975461134804791235994697938405200089317860731205010159117711704697471514344499487123311264707354172378099538737850219826145102366279591379660471881259976727356521602405329789906247763521525981391443887618575275588619928089116905061711975308467857756405810961619074331866883961080943542712559830853980002984826569445431232452392578125E-308,
       "col17":10223372036854775806,
       "col18":"1606233662.012345"
     },
     "meta":{
       "posttime":"2020-12-07T13:34:10",
       "op":"del",
       "size":10,
       "time":"2020-11-25T00:01:02",
       "idx":"1/10",
       "seq":1,
       "table":"mock_database.mock_table",
       "rowid":"mock_database.mock_table-3\u0001129",
       "trans":"shareplex_transaction_id",
       "scn":"123456789"
     }
   }
   ```

### DefaultExtendColumnType-compatible JSON message format

When you synchronize data to a Kafka or RocketMQ instance, the following JSON message format is used for the DefaultExtendColumnType serialization method:

The DefaultExtendColumnType-compatible JSON messages are created in the `Default` format with a `__light_type` field. This field specifies the data type of fields.

```json
{
 "prevStruct": {  // The image before modification.
  },
  "postStruct": {  // The image after modification.
      "__light_type": {
      "col":{ // The field name.
        "schemaType":"type" // The value type.
      }
    }
  },
  "allMetaData" {},

}
```

Sample data:

* Example of data insertion (`INSERT`)

   ```json
   {
     "allMetaData":{
       "checkpoint":null,
       "record_primary_key":"int8\u0001int16",
       "source_identity":null,
       "record_primary_value":"3\u0001129",
       "dbType":"OB_MYSQL",
       "table_name":"table",
       "db":"database",
       "timestamp":"1609344671"
     },
     "prevStruct":null,
     "recordType":"INSERT",
     "postStruct":{
       "col1":3,
       "col2":129,
       "col3":2147483646,
       "col4":9223372036854775806,
       "col5":10223372036854775806,
       "col6":1.2222,
       "col7":9.99999999999999909326625337248461995470488734032045693707225049331647881341002217023668530611028595157578301758491822824378438792553200763769833775473829862512856683413461939989729065436937279228852476622948659167943435544622149348072943613294167216662821737555414480159115639791276054897201420389770580351533960771506199055664889770260291710977826725024401716523031627390652604144008597950935492433262042405635563993262949691698930975461134804791235994697938405200089317860731205010159117711704697471514344499487123311264707354172378099538737850219826145102366279591379660471881259976727356521602405329789906247763521525981391443887618575275588619928089116905061711975308467857756405810961619074331866883961080943542712559830853980002984826569445431232452392578125E-308,
       "col8":"hello world",
       "col9":"aGVsbG8gd29ybGQ=",
       "col10":9.99999999999999909326625337248461995470488734032045693707225049331647881341002217023668530611028595157578301758491822824378438792553200763769833775473829862512856683413461939989729065436937279228852476622948659167943435544622149348072943613294167216662821737555414480159115639791276054897201420389770580351533960771506199055664889770260291710977826725024401716523031627390652604144008597950935492433262042405635563993262949691698930975461134804791235994697938405200089317860731205010159117711704697471514344499487123311264707354172378099538737850219826145102366279591379660471881259976727356521602405329789906247763521525981391443887618575275588619928089116905061711975308467857756405810961619074331866883961080943542712559830853980002984826569445431232452392578125E-308,
       "col11":"2020-11-25",
       "col12":"00:01:02",
       "col13":"2020-11-25 00:01:02",
       "col14":"1606233662.012345",
       "__light_type":{
         "int8":{
           "schemaType":"TINYINT"
         },
         "int16":{
           "schemaType":"SMALLINT"
         },
         "int32":{
           "schemaType":"INT"
         },
         "int64":{
           "schemaType":"INT64"
         },
         "bigInt":{
           "schemaType":"BIGINT"
         },
         "float32":{
           "schemaType":"FLOAT"
         },
         "float64":{
           "schemaType":"DOUBLE"
         },
         "string":{
           "schemaType":"VARCHAR"
         },
         "bytes":{
           "schemaType":"BLOB"
         },
         "decimal":{
           "schemaType":"DECIMAL"
         },
         "localDate":{
           "schemaType":"DATE"
         },
         "localTime":{
           "schemaType":"TIME"
         },
         "localDateTime":{
           "schemaType":"DATETIME"
         },
         "timestamp_in_long":{
           "schemaType":"TIMESTAMP"
         }
       }
     }
   }
   ```

* Example of data update (`UPDATE`)

   ```json
   {
     "allMetaData": {
       "checkpoint": null,
       "record_primary_key": "int8\u0001int16",
       "source_identity": null,
       "record_primary_value": "3\u0001129",
       "dbType":"OB_MYSQL",
       "table_name": "table",
       "db": "database",
       "timestamp": "1609344671"
     },
     "prevStruct": {
        "col1":3,
       "col2":129,
       "col3":2147483646,
       "col4":9223372036854775806,
       "col5":10223372036854775806,
       "col6":1.2222,
       "col7":9.99999999999999909326625337248461995470488734032045693707225049331647881341002217023668530611028595157578301758491822824378438792553200763769833775473829862512856683413461939989729065436937279228852476622948659167943435544622149348072943613294167216662821737555414480159115639791276054897201420389770580351533960771506199055664889770260291710977826725024401716523031627390652604144008597950935492433262042405635563993262949691698930975461134804791235994697938405200089317860731205010159117711704697471514344499487123311264707354172378099538737850219826145102366279591379660471881259976727356521602405329789906247763521525981391443887618575275588619928089116905061711975308467857756405810961619074331866883961080943542712559830853980002984826569445431232452392578125E-308,
       "col8":"hello world",
       "col9":"aGVsbG8gd29ybGQ=",
       "col10":9.99999999999999909326625337248461995470488734032045693707225049331647881341002217023668530611028595157578301758491822824378438792553200763769833775473829862512856683413461939989729065436937279228852476622948659167943435544622149348072943613294167216662821737555414480159115639791276054897201420389770580351533960771506199055664889770260291710977826725024401716523031627390652604144008597950935492433262042405635563993262949691698930975461134804791235994697938405200089317860731205010159117711704697471514344499487123311264707354172378099538737850219826145102366279591379660471881259976727356521602405329789906247763521525981391443887618575275588619928089116905061711975308467857756405810961619074331866883961080943542712559830853980002984826569445431232452392578125E-308,
       "col11":"2020-11-25",
       "col12":"00:01:02",
       "col13":"2020-11-25 00:01:02",
       "col14":"1606233662.012345",
       "__light_type": {
         "int8": {
           "schemaType": "TINYINT"
         },
         "int16": {
           "schemaType": "SMALLINT"
         },
         "int32": {
           "schemaType": "INT"
         },
         "int64": {
           "schemaType": "INT64"
         },
         "bigInt": {
           "schemaType": "BIGINT"
         },
         "float32": {
           "schemaType": "FLOAT"
         },
         "float64": {
           "schemaType": "DOUBLE"
         },
         "string": {
           "schemaType": "VARCHAR"
         },
         "bytes": {
           "schemaType": "BLOB"
         },
         "decimal": {
           "schemaType": "DECIMAL"
         },
         "localDate": {
           "schemaType": "DATE"
         },
         "localTime": {
           "schemaType": "TIME"
         },
         "localDateTime": {
           "schemaType": "DATETIME"
         },
         "timestamp_in_long": {
           "schemaType": "TIMESTAMP"
         }
       }
     },
     "recordType": "UPDATE",
     "postStruct": {
        "col1":3,
       "col2":129,
       "col3":2147483646,
       "col4":9223372036854775806,
       "col5":10223372036854775806,
       "col6":1.2222,
       "col7":9.99999999999999909326625337248461995470488734032045693707225049331647881341002217023668530611028595157578301758491822824378438792553200763769833775473829862512856683413461939989729065436937279228852476622948659167943435544622149348072943613294167216662821737555414480159115639791276054897201420389770580351533960771506199055664889770260291710977826725024401716523031627390652604144008597950935492433262042405635563993262949691698930975461134804791235994697938405200089317860731205010159117711704697471514344499487123311264707354172378099538737850219826145102366279591379660471881259976727356521602405329789906247763521525981391443887618575275588619928089116905061711975308467857756405810961619074331866883961080943542712559830853980002984826569445431232452392578125E-308,
       "col8":"hello world 2020",
       "col9":"aGVsbG8gd29ybGQ=",
       "col10":9.99999999999999909326625337248461995470488734032045693707225049331647881341002217023668530611028595157578301758491822824378438792553200763769833775473829862512856683413461939989729065436937279228852476622948659167943435544622149348072943613294167216662821737555414480159115639791276054897201420389770580351533960771506199055664889770260291710977826725024401716523031627390652604144008597950935492433262042405635563993262949691698930975461134804791235994697938405200089317860731205010159117711704697471514344499487123311264707354172378099538737850219826145102366279591379660471881259976727356521602405329789906247763521525981391443887618575275588619928089116905061711975308467857756405810961619074331866883961080943542712559830853980002984826569445431232452392578125E-308,
       "col11":"2020-11-25",
       "col12":"00:01:02",
       "col13":"2020-11-25 00:01:02",
       "col14":"1606233662.012345",
       "__light_type": {
         "int8": {
           "schemaType": "TINYINT"
         },
         "int16": {
           "schemaType": "SMALLINT"
         },
         "int32": {
           "schemaType": "INT"
         },
         "int64": {
           "schemaType": "INT64"
         },
         "bigInt": {
           "schemaType": "BIGINT"
         },
         "float32": {
           "schemaType": "FLOAT"
         },
         "float64": {
           "schemaType": "DOUBLE"
         },
         "string": {
           "schemaType": "VARCHAR"
         },
         "bytes": {
           "schemaType": "BLOB"
         },
         "decimal": {
           "schemaType": "DECIMAL"
         },
         "localDate": {
           "schemaType": "DATE"
         },
         "localTime": {
           "schemaType": "TIME"
         },
         "localDateTime": {
           "schemaType": "DATETIME"
         },
         "timestamp_in_long": {
           "schemaType": "TIMESTAMP"
         }
       }
     }
   }
   ```

* Example of data deletion (`DELETE`)

   ```json
   {
     "allMetaData":{
       "checkpoint":null,
       "record_primary_key":"int8\u0001int16",
       "source_identity":null,
       "record_primary_value":"3\u0001129",
       "dbType":"OB_MYSQL",
       "table_name":"table",
       "db":"database",
       "timestamp":"1609344671"
     },
     "prevStruct":{
        "col1":3,
       "col2":129,
       "col3":2147483646,
       "col4":9223372036854775806,
       "col5":10223372036854775806,
       "col6":1.2222,
       "col7":9.99999999999999909326625337248461995470488734032045693707225049331647881341002217023668530611028595157578301758491822824378438792553200763769833775473829862512856683413461939989729065436937279228852476622948659167943435544622149348072943613294167216662821737555414480159115639791276054897201420389770580351533960771506199055664889770260291710977826725024401716523031627390652604144008597950935492433262042405635563993262949691698930975461134804791235994697938405200089317860731205010159117711704697471514344499487123311264707354172378099538737850219826145102366279591379660471881259976727356521602405329789906247763521525981391443887618575275588619928089116905061711975308467857756405810961619074331866883961080943542712559830853980002984826569445431232452392578125E-308,
       "col8":"hello world",
       "col9":"aGVsbG8gd29ybGQ=",
       "col10":9.99999999999999909326625337248461995470488734032045693707225049331647881341002217023668530611028595157578301758491822824378438792553200763769833775473829862512856683413461939989729065436937279228852476622948659167943435544622149348072943613294167216662821737555414480159115639791276054897201420389770580351533960771506199055664889770260291710977826725024401716523031627390652604144008597950935492433262042405635563993262949691698930975461134804791235994697938405200089317860731205010159117711704697471514344499487123311264707354172378099538737850219826145102366279591379660471881259976727356521602405329789906247763521525981391443887618575275588619928089116905061711975308467857756405810961619074331866883961080943542712559830853980002984826569445431232452392578125E-308,
       "col11":"2020-11-25",
       "col12":"00:01:02",
       "col13":"2020-11-25 00:01:02",
       "col14":"1606233662.012345",
       "__light_type":{
         "int8":{
           "schemaType":"TINYINT"
         },
         "int16":{
           "schemaType":"SMALLINT"
         },
         "int32":{
           "schemaType":"INT"
         },
         "int64":{
           "schemaType":"INT64"
         },
         "bigInt":{
           "schemaType":"BIGINT"
         },
         "float32":{
           "schemaType":"FLOAT"
         },
         "float64":{
           "schemaType":"DOUBLE"
         },
         "string":{
           "schemaType":"VARCHAR"
         },
         "bytes":{
           "schemaType":"BLOB"
         },
         "decimal":{
           "schemaType":"DECIMAL"
         },
         "localDate":{
           "schemaType":"DATE"
         },
         "localTime":{
           "schemaType":"TIME"
         },
         "localDateTime":{
           "schemaType":"DATETIME"
         },
         "timestamp_in_long": {
           "schemaType": "TIMESTAMP"
         }
       }
     },
     "recordType":"DELETE",
     "postStruct":null
   }
   ```

### Debezium JSON message format

When you synchronize data to a Kafka or RocketMQ instance, the following JSON message format is used for the Debezium serialization method:

```json
{
  "payload":{
    "op":"c", // The type of data modification. Valid values: c, u, d, and HEARTBEAT. c indicates full insert. u indicates update. d indicates delete. HEARTBEAT indicates a heartbeat message.
    "source":{
      "version":"" // The version of OMS Community Edition.
      "connector":"OB_MYSQL", // The type of the data source.
      "name":"OMS", // A fixed value, which is OMS.
      "ts_ms":0, // The timestamp in seconds for data modification, which is available only for incremental synchronization.
      "db":"test", // The database name to be changed by using an SQL statement. If the specified database is an instance of OceanBase Database Community Edition, only the database name is required.
      "table":"testTab" // The table name modified by using an SQL statement.
      "pos":"553132@1668496109" // The log location in the binlog file, in the format of [binlog file name]@[binlog file name offset].
    },
    "before":{ // The image before modification.
      "col1":"val1" // The key-value pair that contains the full key value.
    }
    "after":{ // The image after modification.
      "col1":"val1" // The key-value pair that contains the full key value.
    },
    "ts_ms":1668497367188 // The timestamp of data processing.
  }
}
```

Sample data:

* Example of data insertion (`INSERT`)

   ```json
   {
   "payload":{
     "op":"c",
     "source":{
       "connector":"OB_MYSQL",
       "pos":"703223@1668491600",
       "name":"OMS",
       "version":"",
       "ts_ms":1668491621000,
       "db":"test",
       "table":"table1"
     },
     "after":{
       "c11":"a",
       "c10":2.4212412,
       "c13":"c",
       "c12":"b",
       "c15":"65",
       "c14":"d",
       "c17":"67",
       "c16":"f",
       "c19":"690000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
       "c18":"68",
       "c20":"6A",
       "c22":19311,
       "c21":"2022-11-15T05:12:11Z",
       "c02":"12312",
       "c24":1668489131000,
       "c01":2,
       "c23":36060000000,
       "c04":"61",
       "c26":"6B",
       "c03":"1241.41000",
       "c25":2022,
       "c06":141,
       "c05":11,
       "c08":412124124,
       "c07":4241,
       "c09":2.11111
     },
     "ts_ms":1668495423594
   }
   ```

* Example of data update (`UPDATE`)

   ```json
   {
   "payload":{
     "op":"d",
     "before":{
       "c11":"aa",
       "c10":2.4212412,
       "c13":"c",
       "c12":"b",
       "c15":"65",
       "c14":"d",
       "c17":"67",
       "c16":"f",
       "c19":"690000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
       "c18":"68",
       "c20":"6A",
       "c22":19311,
       "c21":"2022-11-15T05:12:11Z",
       "c02":"12312",
       "c24":1668489131000,
       "c01":1,
       "c23":36060000000,
       "c04":"61",
       "c26":"6B",
       "c03":"1241.41000",
       "c25":2022,
       "c06":141,
       "c05":11,
       "c08":412124124,
       "c07":4241,
       "c09":2.11111
     },
     "source":{
       "connector":"OB_MYSQL",
       "pos":"553132@1668496109",
       "name":"OMS",
       "version":"",
       "ts_ms":1668496109000,
       "db":"test",
       "table":"table1"
     },
     "ts_ms":1668496119717
   }
   ```

* Example of data deletion (`DELETE`)

   ```json
   {
   "payload":{
     "op":"d",
     "before":{
       "c11":"aa",
       "c10":2.4212412,
       "c13":"c",
       "c12":"b",
       "c15":"65",
       "c14":"d",
       "c17":"67",
       "c16":"f",
       "c19":"690000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
       "c18":"68",
       "c20":"6A",
       "c22":19311,
       "c21":"2022-11-15T05:12:11Z",
       "c02":"12312",
       "c24":1668489131000,
       "c01":1,
       "c23":36060000000,
       "c04":"61",
       "c26":"6B",
       "c03":"1241.41000",
       "c25":2022,
       "c06":141,
       "c05":11,
       "c08":412124124,
       "c07":4241,
       "c09":2.11111
     },
     "source":{
       "connector":"OB_MYSQL",
       "pos":"553132@1668496109",
       "name":"OMS",
       "version":"",
       "ts_ms":1668496109000,
       "db":"testDb",
       "table":"testTab"
     },
     "ts_ms":1668496119717
   }
   ```

## Data formats for data transmission from OceanBase Database to a message queue system

This section describes the data format mappings when you synchronize data from OceanBase Database Community Edition to a Kafka or RocketMQ instance.

* The following table describes data format mappings in OceanBase Database Community Edition when the **Default**, **Canal**, **Dataworks** (version 2.0), **SharePlex**, or **DefaultExtendColumnType** serialization method is used.

   | Data type | Mapped-to type | Description |
   |--------------------------------------------------------------------------------------------------------------------------|------------|---------------------------------------------------------------------------------------------------------------------------------------------------------|
   | TINYINT <br>SMALLINT <br>MEDIUMINT <br>INT/INTEGER <br>YEAR <br>BOOL/BOOLEAN | Long | Integers that are shorter than 64 digits. <br>Scientific notation is not used for a normal value such as 1000.  <br>For a BOOL or BOOLEAN value, true is converted to 1 and false is converted to 0.  |
   | DECIMAL <br>NUMERIC | BigDecimal | Exact decimal numerals and integers longer than 64 digits.  <br>An integer is displayed without the decimal point or a decimal place. <br>A decimal numeral is displayed based on the data passed in to the database instance without removing zeros at the end. Scientific notation is used.  |
   | FLOAT <br>DOUBLE | Double | Floating-point numbers. The number of significant digits is determined based on the source data type. If the source data type is FLOAT, the converted value has 7 significant digits. If the source data type is DOUBLE, the converted value has 16 significant digits.  |
   | CHAR <br>VARCHAR<br> TINYTEXT <br>TEXT<br> MEDIUMTEXT<br> LONGTEXT <br>ENUM <br>SET | String | Strings. |
   | TINYBLOB <br>BLOB <br>MEDIUMBLOB <br>LONGBLOB <br>BINARY <br>VARBINARY <br>BIT | Bytes | Byte arrays.<br>By default, a byte array is displayed in a Base64-encoded string.  |
   | DATE | Date | The DATE type in the format of `YYYY-MM-DD`. If the value is invalid, the original string is displayed.  |
   | TIME | Time | The TIME type in the format of `HH:mm:ss[.nnnnnnnnn]`.  <br>The fractional seconds part can contain a maximum of 9 digits. Zeros at the end of the fractional seconds part are not displayed. If the value is invalid, the original string is displayed.  |
   | DATETIME | DateTime | The DATETIME type in the format of `YYYY-MM-DD HH:mm:ss[.nnnnnnnnn] [zoneId]`, including the time zone.  <br>The fractional seconds part can contain a maximum of 9 digits. Zeros at the end of the fractional seconds part are not displayed. If the value is invalid, the original string is displayed.  |
   | TIMESTAMP | Timestamp | The TIMESTAMP type in the format of `[second-level timestamp][.nnnnnnnnn]`.  <br>The fractional seconds part can contain a maximum of 9 digits. Zeros at the end of the fractional seconds part are not displayed. If the time is invalid, `0000-00-00 00:00:00` is displayed.  |

   Compared with OMS Community Edition of earlier versions, a project in OMS Community Edition V3.3.0 and later has the following changes:

   > **Note**
   >
   > After you upgrade OMS Community Edition to V3.3.0 and later, a project created in OMS Community Edition of an earlier version does not change.

  * The BIT data type of OceanBase Database Community Edition is converted into a Base64-encoded byte value rather than a value of the LONG data type. The bytes value can be Base64-decoded to the source value.

  * The TIMESTAMP data type of OceanBase Database Community Edition is passed in the `sec.mill` format. In OMS Community Edition of a version earlier than V3.3.0, the TIMESTAMP data type is passed as an integer in seconds``.

  * The format of other time data types is `YYYY-MM-DD HH:mm:ss[.nnnnnnnnn]` in OMS Community Edition V3.3.0 and later, and `YYYY-MM-DDTHH:mm[:ss]` in OMS Community Edition of a version earlier than V3.3.0.

* The following table describes data format mappings in OceanBase Database Community Edition when the **Debezium** serialization method is used.

   | Data type | Mapped-to type | Description |
   |---------------|-----------------------------------|---------------------------------------|
   | BOOLEAN <br>BOOL | BOOLEAN | Valid values: true and false.  |
   | TINYINT <br>SMALLINT <br>MEDIUMINT <br>INT/INTEGER <br>BIGINT <br>YEAR | LONG | Integers that are shorter than 64 digits.  |
   | FLOAT <br>DOUBLE | DOUBLE | Floating-point numbers.  |
   | DECIMAL <br>NUMERIC | STRING | Strings that display the data in full. A decimal numeral is displayed based on the data passed to the database instance without removing zeros at the end. Scientific notation is used.  |
   | BIT <br> BINARY <br> VARBINARY <br> TINYBLOB <br> BLOB<br> MEDIUMBLOB <br> LONGBLOB | BYTES | Base16-encoded byte arrays.  |
   | CHAR<br> VARCHAR <br> TINYTEXT <br>TEXT  <br>MEDIUMTEXT <br> LONGTEXT <br> ENUM<br> SET | STRING | Strings.  |
   | TIMESTAMP | STRING | Strings in the format of [YYYY-MM-DDTHH:mm:ss]Z. The time zone is UTC+0.  |
   | DATE | LONG | The number of days since January 1st, 1970.  |
   | TIME | LONG | The temporal value, in microseconds, since 00:00:00, excluding the time zone.  |
   | DATETIME | LONG | The temporal value, in milliseconds, since 1970-01-01 00:00:00, excluding the time zone.  |
