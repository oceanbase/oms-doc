# User privileges

Before you migrate data between databases by using OceanBase Migration Service (OMS) Community Edition, ensure that you have created a database user for each data source as the migration or synchronization user. These users must have the required privileges on the source and destination data sources.

## Privileges

The following table lists the privileges required by migration/synchronization users in different databases. Before you create a data source, make sure that you have granted relevant privileges to the specified user.


|            **Database**             |    **Role**     |                                                                              **Required user privileges**                                                                             |
|-------------------------------------|-------------|-------------------------------------------------------------------|
| MySQL                               | Source      | <ul><li> The database user must have the read privilege on the database from which data is migrated.  ``` GRANT SELECT ON <Database from which data is migrated>.*; ```   <li>  The privilege required by the database user to perform incremental synchronization on a MySQL database:  <br>``` GRANT REPLICATION CLIENT, REPLICATION SLAVE ON *.* TO <user_name> WITH GRANT OPTION; ```   <li> The database user must have the `SELECT *.*` privilege to synchronously pull incremental logs. <br> ``` GRANT SELECT ON *.*; ```      </ul>                                                                                                                                                                                                                                                                                                                              |
| MySQL                               | Destination | Run the following command to authorize the user in the MySQL database: <br> ``` GRANT <privilege_type> ON <db_name>.<table_name> TO '<user_name>'@'<host>' [WITH GRANT OPTION]; ```  <ul><li> `privilege_type`: The privilege to be granted to the user. Valid values: `SELECT`, `INSERT`, `UPDATE`, and `REFERENCES`. To grant all privileges to the account, set this parameter to ALL.  <li>  `db_name`: The name of the database. To grant operation privileges on all databases to the account, set this parameter to an asterisk (\*).  <li>  `table_name`: The name of the table. To grant operation privileges on all tables to the account, set this parameter to an asterisk (\*).   <li>  `user_name`: The user to be authorized.   * `host`: The host from which the user is allowed to log on to the database. To allow the user to log on to the database from any host, set this parameter to a percent sign (%).  <li> `WITH GRANT OPTION`: grants the user the privilege to run the `GRANT` command. This parameter is optional.    </ul>                                                                                                                                                                                                                                                                                |
| MySQL tenant of OceanBase Database  | Source      | User privileges required for synchronizing data from a MySQL tenant of OceanBase Databases to a Kafka or RocketMQ instance: <ul><li>  `SELECT` privilege on the source business database.  <li> `SELECT` privilege on the OceanBase databases, Information_schema, and MySQL databases of the source tenant.   <li>  For incremental data synchronization scenarios, you need to create a user under the SYS tenant of OceanBase Database and grant the `select on *.*` privilege to the user.  The username and password must be the same as those in the `config.yaml` file.  </ul>  When you synchronize data from logical tables to physical tables in a MySQL tenant of OceanBase Database, the data source account is not used in the source tables. By default, the drc_user (password: drc_password) in the `config.yaml` file is used. <ul><li> If you need incremental synchronization, you need to create the drc account under the SYS tenant and grant the `SELECT` privilege to the account. At the same time, you need to create the same account under the business tenant to be synchronized and grant the `SELECT` privilege to the account.   <li>  If you need full synchronization, you need to create the drc account under the business tenant to be synchronized and grant the `SELECT` privilege to the account.    |
| MySQL tenant of OceanBase Database  | Destination | The migration user in a MySQL tenant of OceanBase Database must have the following privileges when migrating data from a MySQL database to the MySQL tenant of OceanBase Database: <ul><li> The `SELECT`, `INSERT`, `UPDATE`, and `DELETE` privileges on the business database.   <li> The `SELECT` privilege on the OceanBase databases, information_schema, and MySQL databases.  </ul>      |
| Kafka                               | Destination | If the Kafka instance requires authentication, see [Add a Kafka data source](../3.manage-data-sources/1.add-a-data-source/4.add-a-Kafka-data-source.md)  <br>A Kafka user must have privileges to perform the following operations: <ul><li>  Create and view topics   <li> View topic partition information  <li>  Write records   <li>  Read records    </ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| RocketMQ                            | Destination | If Message Queue for Apache RocketMQ of Alibaba Cloud is used, see "Policies and examples" in documentation of Message Queue for Apache RocketMQ.  A user of Message Queue for Apache RocketMQ must have privileges to perform the following operations: <ul><li>  Create and view topics   <li>  View the information of the topic message queue   <li> Write records   <li>  Read records        </ul>                                                             |

### Privileges of the OceanBase Database user for pulling incremental data 

You need to create a user (such as the user `oms_drc`) for the OceanBase cluster under the SYS tenant to authenticate OMS when it consumes the Clog logs from the OceanBase cluster.

The username and password must be the same with `drc_user` and `drc_password` in the OMS Community Edition deployment configuration file `config.yaml`.

```unknow
CREATE USER <oms_drc> IDENTIFIED BY <drc_password>;
GRANT SELECT ON OCEANBASE.* TO <oms_drc>;
```